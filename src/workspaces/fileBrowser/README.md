# FileBrowser Workspace Module

## Описание

Модуль FileBrowser предоставляет функционал для навигации по файловой системе, просмотра файлов и папок, поиска и перетаскивания файлов в workspace.

## Структура модуля

```
workspaces/fileBrowser/
├── FileBrowserView.tsx    # Основной компонент браузера файлов
├── index.ts               # Регистрация модуля в реестре
└── README.md             # Документация модуля
```

## Зависимости

### Core
- `@core/types/workspace` - WorkspaceId

### Shared
- `@shared/stores/demoPlayerStore` - предпросмотр аудио файлов
- `@shared/stores/uiStore` - focus requests для навигации
- `@shared/services/fileService` - работа с файловой системой
- `@shared/services/ipcService` - IPC коммуникация
- `@shared/utils` - утилиты (useDebounce, logger)

## Функциональность

### Основные возможности

1. **Навигация по файловой системе**
   - Просмотр содержимого папок
   - Навигация назад/вверх
   - Breadcrumbs навигация
   - Инициализация с папкой Music

2. **Поиск**
   - Поиск по имени файла/папки
   - Debounced поиск (300ms)
   - Фильтрация результатов

3. **Выделение файлов**
   - Одиночное выделение
   - Множественное выделение (Ctrl+клик)
   - Выделение диапазона (Shift+клик)

4. **Drag-and-Drop**
   - Перетаскивание файлов в workspace
   - Перетаскивание папок (рекурсивное добавление треков)
   - Поддержка множественного выделения

5. **Предпросмотр аудио**
   - Воспроизведение аудио файлов
   - Пауза воспроизведения
   - Индикация активного файла

6. **Focus на файл**
   - Программная навигация к файлу
   - Подсветка файла
   - Прокрутка к файлу

### Особенности реализации

- Использует `useUIStore` для получения focus requests
- Поддерживает навигацию к файлу через `focusFileInBrowser`
- Автоматически определяет аудио файлы через `fileService.isValidAudioFile()`
- Debounced поиск для оптимизации производительности

## Использование

Модуль используется двумя способами:

1. **Как workspace** - через `WorkspaceRenderer` для workspace с типом `'fileBrowser'`
2. **В SourcesPanel** - как отдельный компонент `FileBrowser` (старая реализация)

**Примечание**: В `WorkspaceRenderer` для `fileBrowser` используется специальный случай с `SourcesPanel`, а не прямой рендеринг модуля.
